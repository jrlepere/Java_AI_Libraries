import local_search.GeneticAlgorithmSearch.StateBitStreamConversion;
import problem.State;

public class NQueensStateBitStreamConverstion implements StateBitStreamConversion {

	public NQueensStateBitStreamConverstion(int n) {
		this.n = n;
	}
	
	public String getBitStream(State s) {
		int[] queenLocations = ((NQueensState) s).getQueenLocations();
		int maxBits = Integer.toBinaryString(queenLocations.length-1).length();
		String bitStream = "";
		for (int i = 0; i < queenLocations.length; i ++) {
			String bString = Integer.toBinaryString(i);
			for (int e = bString.length(); e < maxBits; e ++) {
				bString = "0" + bString;
			}
			bitStream = bitStream + bString;
		}
		return bitStream;
	}

	public State convertBitStream(String s) {
		int maxBits = Integer.toBinaryString(n-1).length();
		int[] queenLocations = new int[n];
		int queenLocation = 0;
		String bString = "";
		for (int i = 0; i < s.length(); i ++) {
			if (i == s.length() - 1) {
				bString = bString + s.substring(i);
			} else {
				bString = bString + s.substring(i, i+1);
			}
			if (bString.length() == maxBits) {
				queenLocations[queenLocation] = Integer.parseUnsignedInt(bString, 2);
				queenLocation += 1;
				bString = "";
			}
		}
		return null;
	}
	
	private int n;

}
